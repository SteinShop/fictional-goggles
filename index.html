<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>P√°gina de Acesso</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      margin: 0;
      padding: 0;
    }

    h1 {
      text-align: center;
      color: #333;
    }

    button {
      background-color: #4CAF50;
      color: white;
      padding: 15px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #45a049;
    }

    p {
      color: #666;
    }

    ul {
      list-style-type: none;
      padding: 0;
    }

    ul li {
      margin-bottom: 10px;
    }

    a {
      text-decoration: none;
      color: #007bff;
    }

    a:hover {
      text-decoration: underline;
    }

    #unlockPage {
      margin-top: 50px;
      padding: 20px;
      background-color: #000;
      color: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    textarea {
      width: 100%;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    input[type="text"] {
      width: calc(100% - 130px);
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .message {
      background-color: #f9f9f9;
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 10px;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>

  <h1>Bem-vindo ao site de membros do canal!</h1>

  <div id="pinwheelPage">
    <button onclick="retrieveOrGeneratePin()" style="background-color: #007bff;">Obter PINWHEEL</button>
    <p><a href="00020126580014BR.GOV.BCB.PIX01365680c8a0-d09d-41d0-92ff-35389177d792520400005303986540520.005802BR5925ARTHUR BENITEZ DOS SANTOS6013Florianopolis61088803410062070503***63042540" target="_blank">REALIZAR PIX</a></p>
     <p>Ol√°! Para enviar mensagens na p√°gina de membros, realize o PIX e envie seu PINWHEEL junto com o comprovante de pagamento para os n√∫meros que estar√£o logo abaixo!</p>
    <h4>Informa√ß√µes adicionais:<h4/>
      <p>‚Ä¢üëã Quando voc√™ sair do site, o seu PINWHEEL ser√° o mesmo.</p>
      <p>‚Ä¢üë®‚Äçüíª Demoramos at√© 10 minutos para responder.
        <p>‚Ä¢ü§ì‚òùÔ∏è Voc√™ ter√° acesso √† p√°gina de membros at√© o dia 29, e poder√° assistir aos videos de modo antecipado.</p>
        <p>‚Ä¢ü´Ç Envie uma mensagem escrevendo o PINWHEEL do seu amigo que lhe indicou o site, e seu amigo receber√° uma recompensa ao falar com nossa equipe.</p>
        <p>‚Ä¢‚ù§Ô∏è Seja inscrito!</p>
      <p>‚Ä¢0Ô∏è‚É£1Ô∏è‚É£2Ô∏è‚É£Se o seu PINWHEEL come√ßa com o n√∫mero 0; 1 ou 2,envie o comprovante para o n√∫mero +55 48 9642-1902</p>
      <p>3Ô∏è‚É£4Ô∏è‚É£5Ô∏è‚É£ Se o seu PINWHEEL come√ßa com o n√∫mero 3; 4 ou 5, envie o comprovante para o n√∫mero +55 48 98433-0340</p>
      <p>6Ô∏è‚É£7Ô∏è‚É£8Ô∏è‚É£9Ô∏è‚É£ Se o seu PINWHEEL come√ßa com o n√∫mero 6; 7; 8 ou 9, envie o comprovante para o n√∫mero</p>
      </p>
  </div>
  

  <div id="unlockPage" class="hidden">
    <h2>Seu PINWHEEL: <span id="userPin"></span></h2>
    <h2>Links Desbloqueados</h2>
    <ul>
      <li><a href="https://youtube.com/@steinshop?si=tj4tfHpdMKH0uyhH" target="_blank">Acesse nosso canal do youtube clicando aqui</a></li>
      <li><a href="https://steinshop.com.br/" target="_blank">Visite a loja</a></li>
    </ul>
    <p>Parab√©ns! Agora voc√™ tem acesso √† p√°gina de membros at√© o dia 29.</p>
    <button onclick="like()" style="background-color: #007bff;">Curtir <span id="likeCount">0</span></button>
    <div id="messageSection">
      <h2>Enviar Mensagem</h2>
      <h3>Coloque o PINWHEEL do seu amigo. Voc√™ s√≥ pode enviar uma mensagem por m√™s, e n√£o pode colocar o pr√≥prio c√≥digo.</h3>
      <p>ATEN√á√ÉO: N√ÉO ENVIE MENSAGEM DIA 29, POIS TODAS AS MENSAGENS S√ÉO EXCLU√çDAS DIA 29</p>
      <textarea id="messageInput" rows="4" placeholder="Digite sua mensagem"></textarea>
      <button onclick="sendMessage()" style="background-color: #007bff;">Enviar</button>
    </div>
    <div id="searchSection">
      <h2>Pesquisar Mensagens do Usu√°rio:</h2>
      <input type="text" id="searchInput" placeholder="C√≥digo do Usu√°rio">
      <button onclick="searchUser()" style="background-color: #007bff;">Pesquisar Usu√°rio</button>
      <div id="userMessages"></div>
    </div>
    <div id="searchMessagesSection">
      <h2>Pesquisar Mensagens com o PINWHEEL:</h2>
      <input type="text" id="searchMessagesInput" placeholder="Digite uma palavra-chave">
      <button onclick="searchMessages()" style="background-color: #007bff;">Pesquisar Mensagens</button>
      <div id="foundMessages"></div>
    </div>
  </div>

  <script>
    // Lista de PINWHEELs permitidos
    let allowedPins = ['043636560479682','739688312745092','549522830938253', '016692605529158','05398330429311'];
    let allowedToSendMessagesPins = ['043636560479682']; // Lista de PINWHEELS que podem enviar mensagens

    // Carregar mensagens do localStorage
    let userMessages = JSON.parse(localStorage.getItem('userMessages')) || {};
    let lastMessageDate = {};

    // Contador de curtidas
    let likeCount = 0;

    function retrieveOrGeneratePin() {
      let userPin = localStorage.getItem('userPin');

      // Check if user already has a PINWHEEL
      if (!userPin) {
        // Generate a unique PINWHEEL for the user
        userPin = generateUniquePin();
        localStorage.setItem('userPin', userPin);
      }

      // Update the PINWHEEL display
      document.getElementById('pinwheelPage').innerHTML = `
        <h2>Seu PINWHEEL: ${userPin}</h2>
        <p><a href="https://nubank.com.br/cobrar/tezyu/65ac71d4-2e7b-41ee-9fc0-362977b08070" target="_blank">REALIZAR PIX</a></p>
        <p>üí∞üí∞üí∞</p>
      `;
      
      // Display the user's PINWHEEL
      document.getElementById('userPin').innerText = userPin;

      // Check if the PINWHEEL is allowed
      if (allowedPins.includes(userPin)) {
        // Mostra a p√°gina de desbloqueio apenas se o PINWHEEL estiver na lista permitida
        document.getElementById('unlockPage').classList.remove('hidden');
      } else {
        // Oculta a p√°gina de desbloqueio se o PINWHEEL n√£o estiver permitido
        document.getElementById('unlockPage').classList.add('hidden');
      }

      // Check and clear messages if it's the 29th day of the month
      checkAndClearMessages();
    }

    function generateUniquePin() {
      let newPin;
      do {
        // Generate a random PINWHEEL
        newPin = Math.floor(Math.random() * 100000000000000).toString().padStart(15, '0');
      } while (allowedPins.includes(newPin)); // Check if the PINWHEEL is unique

      // Add the new PINWHEEL to the allowed list
      allowedPins.push(newPin);

      return newPin;
    }

    function like() {
      likeCount++;
      document.getElementById('likeCount').innerText = likeCount;
      alert('Voc√™ curtiu!');
    }

    function sendMessage() {
      let userPin = localStorage.getItem('userPin');
      if (allowedToSendMessagesPins.includes(userPin)) {
        if (!userMessages[userPin]) {
          let message = document.getElementById('messageInput').value;
          alert(`Mensagem enviada: ${message}`);

          // Armazenar mensagem do usu√°rio atual
          userMessages[userPin] = { message: message, date: new Date().toISOString() };// Salvar as mensagens no localStorage
          localStorage.setItem('userMessages', JSON.stringify(userMessages));
        } else {
          alert('Voc√™ j√° enviou uma mensagem neste m√™s.');
        }
      } else {
        alert('Seu PINWHEEL n√£o tem permiss√£o para enviar mensagens.');
      }
    }

    function checkAndClearMessages() {
      let currentDate = new Date();
      if (currentDate.getDate() === 29) {
        // √â o dia 29, limpar as mensagens
        userMessages = {};
        localStorage.removeItem('userMessages');
        alert('Mensagens exclu√≠das no dia 29 do m√™s.');
      }
    }

    function searchUser() {
      let userCode = document.getElementById('searchInput').value;
      alert(`Pesquisando mensagens do usu√°rio ${userCode}`);
      displayUserMessages(userCode);
    }

    function displayUserMessages(userCode) {
      let messages = userMessages[userCode];
      if (messages) {
        document.getElementById('userMessages').innerHTML = `<div class="message"><h3>Mensagens do Usu√°rio ${userCode}</h3><p>${messages.message}</p></div>`;
      } else {
        document.getElementById('userMessages').innerHTML = `<div class="message"><h3>Nenhuma mensagem encontrada para o usu√°rio ${userCode}</h3></div>`;
      }
    }

    function searchMessages() {
      let keyword = document.getElementById('searchMessagesInput').value;
      alert(`Pesquisando mensagens com a palavra-chave "${keyword}"`);
      searchKeywordMessages(keyword);
    }

    function searchKeywordMessages(keyword) {
      let foundMessages = [];
      for (let userCode in userMessages) {
        if (userMessages.hasOwnProperty(userCode)) {
          let userMessage = userMessages[userCode];
          if (userMessage.message.includes(keyword)) {
            foundMessages.push(`<div class="message"><p>${userCode}: ${userMessage.message}</p></div>`);
          }
        }
      }
      displayFoundMessages(foundMessages);
    }

    function displayFoundMessages(messages) {
      let foundMessagesDiv = document.getElementById('foundMessages');
      foundMessagesDiv.innerHTML = messages.length > 0 ?
        `<h3>Mensagens Encontradas</h3>${messages.join('')}` :
        `<h3>Nenhuma mensagem encontrada com a palavra-chave</h3>`;
    }
  </script>

</body>
</html>
